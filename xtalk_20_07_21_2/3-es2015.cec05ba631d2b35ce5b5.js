(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{tSmu:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class u{}var s=e("t68o"),i=e("zbXB"),a=e("NcP4"),o=e("xYTU"),r=e("pMnS"),c=e("9AJC"),b=e("iutN"),m=e("Xg1U"),h=e("VpDk"),d=e("Gfl+"),g=e("lmyO"),p=e("K8MI"),f=e("F6l4"),v=e("uJnt"),B=e("AOb3"),I=e("xkI/"),C=e("oEa3"),M=e("K+Po"),k=e("LLQM"),x=e("72i9"),L=e("Q+lL"),w=e("Xd0L"),q=e("SVse"),y=e("6UMx"),D=e("ura0"),N=e("/q54"),R=e("NvT6"),O=e("W5yJ"),S=e("/HVE"),P=e("omvX"),$=e("IheW"),A=e("LRne"),_=e("lJxs"),E=e("JIr8"),j=e("t0IR");class F{constructor(l,n){this.chatService=l,this.uploadService=n,this.imageHelper=new j.a,this.uploaded=!1}ngOnInit(){"image"==this.message.type&&this.message.isNew&&(new Image,this.uploadFile()),"text"==this.message.type&&this.message.isNew&&this.chatService.sendMessage(this.message)}preview(l){if(null!=l.type.match(/image\/*/)){var n=new FileReader;n.readAsDataURL(l),n.onload=l=>{this.message.imageLink=n.result}}}uploadFile(){this.uploaded=!0;const l=new FormData;l.append("file",this.message.file.data),this.message.file.inProgress=!0,this.uploadService.upload(l).pipe(Object(_.a)(l=>{switch(l.type){case $.f.UploadProgress:this.message.file.progress=Math.round(100*l.loaded/l.total);break;case $.f.Response:return l}}),Object(E.a)(l=>(this.message.file.inProgress=!1,Object(A.a)(this.message.file.data.name+" upload failed.")))).subscribe(l=>{"object"==typeof l&&1==l.body.status&&(this.message.imageLink=l.body.data.url,this.chatService.sendMessage(this.message))})}}var V=e("RlqE"),U=e("AytR");let H=(()=>{class l{constructor(l){this.httpClient=l,this.SERVER_URL=U.a.uploadUrl}upload(l){return this.httpClient.post(this.SERVER_URL,l,{reportProgress:!0,observe:"events"})}}return l.ngInjectableDef=t.Qb({factory:function(){return new l(t.Rb($.c))},token:l,providedIn:"root"}),l})();var J=t.pb({encapsulation:0,styles:[[".mat-progress-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .progress-upload[_ngcontent-%COMP%]{float:right;width:15px!important;height:15px!important}.preview-Img[_ngcontent-%COMP%]{max-width:50%}"]],data:{}});function z(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"div",[["class","pic-item-chat"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var e=n.component;l(n,1,0,t.vb(1,"",e.imageHelper.getAvatarLinkV2(e.user,e.user.avatarPath,"thumbnail"),""))}))}function T(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"div",[["class","pic-item-chat"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var e=n.component;l(n,1,0,t.vb(1,"",e.imageHelper.getAvatarLinkV2(e.to,e.to.avatarPath,"thumbnail"),""))}))}function G(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,9,"div",[["class","item-chat"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,z)),t.qb(2,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,T)),t.qb(4,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(5,0,null,null,1,"div",[["class","txt-item-chat"]],null,null,null,null,null)),(l()(),t.Lb(6,null,[" "," "])),(l()(),t.rb(7,0,null,null,2,"span",[["class","date-chat"]],null,null,null,null,null)),(l()(),t.Lb(8,null,["",""])),t.Hb(9,2)],(function(l,n){var e=n.component;l(n,2,0,e.message.from.id==e.user.id),l(n,4,0,e.message.from.id!=e.user.id)}),(function(l,n){var e=n.component;l(n,6,0,e.message.text);var u=t.Mb(n,8,0,l(n,9,0,t.Db(n.parent,0),e.message.createdAt,"shortTime"));l(n,8,0,u)}))}function Z(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"div",[["class","pic-item-chat"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var e=n.component;l(n,1,0,t.vb(1,"",e.imageHelper.getAvatarLinkV2(e.user,e.user.avatarPath,"thumbnail"),""))}))}function K(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"div",[["class","pic-item-chat"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var e=n.component;l(n,1,0,t.vb(1,"",e.imageHelper.getAvatarLinkV2(e.to,e.to.avatarPath,"thumbnail"),""))}))}function Q(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"mat-progress-spinner",[["class","progress-upload mat-progress-spinner"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"],[1,"aria-valuemin",0],[1,"aria-valuemax",0],[1,"aria-valuenow",0],[1,"mode",0]],null,null,R.b,R.a)),t.qb(1,114688,null,0,O.b,[t.k,S.a,[2,q.d],[2,P.a],O.a],{diameter:[0,"diameter"],value:[1,"value"]},null)],(function(l,n){l(n,1,0,20,n.component.message.file.progress)}),(function(l,n){l(n,0,0,t.Db(n,1)._noopAnimations,t.Db(n,1).diameter,t.Db(n,1).diameter,"determinate"===t.Db(n,1).mode?0:null,"determinate"===t.Db(n,1).mode?100:null,"determinate"===t.Db(n,1).mode?t.Db(n,1).value:null,t.Db(n,1).mode)}))}function W(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,2,"div",[["class","txt-item-chat"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Q)),t.qb(2,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.uploaded&&100!=e.message.file.progress)}),null)}function Y(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,11,"div",[["class","item-chat"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Z)),t.qb(2,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,K)),t.qb(4,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(5,0,null,null,1,"div",[["class","txt-item-chat"]],null,null,null,null,null)),(l()(),t.rb(6,0,null,null,0,"img",[["alt",""],["class","preview-Img"],["srcset",""]],[[8,"src",4]],null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,W)),t.qb(8,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(9,0,null,null,2,"span",[["class","date-chat"]],null,null,null,null,null)),(l()(),t.Lb(10,null,["",""])),t.Hb(11,2)],(function(l,n){var e=n.component;l(n,2,0,e.message.from.id==e.user.id),l(n,4,0,e.message.from.id!=e.user.id),l(n,8,0,e.message.isNew)}),(function(l,n){var e=n.component;l(n,6,0,t.vb(1,"",e.message.imageLink,""));var u=t.Mb(n,10,0,l(n,11,0,t.Db(n.parent,0),e.message.createdAt,"shortTime"));l(n,10,0,u)}))}function X(l){return t.Nb(0,[t.Fb(0,q.e,[t.t]),(l()(),t.hb(16777216,null,null,1,null,G)),t.qb(2,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Y)),t.qb(4,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,"text"==e.message.type),l(n,4,0,"image"==e.message.type)}),null)}class ll{transform(l,n,e){return n?(n=n.toLowerCase(),l.filter((function(l){var t=!1;for(var u in e){if(l.userId[e[u]]&&(l.userId[e[u]].toLowerCase().indexOf(n)>-1&&(t=!0),t))return l;if(l.modelId[e[u]]&&(l.modelId[e[u]].toLowerCase().indexOf(n)>-1&&(t=!0),t))return l}}))):l}}var nl=e("ofNW"),el=e("mFvv"),tl=e("Agjv"),ul=e("ckUu"),sl=e("2Rd7"),il=e("gwYC"),al=e("iInd"),ol=e("s7LF"),rl=e("mgu0"),cl=e("WCfK"),bl=e("aF9I"),ml=e("h8JX"),hl=e("4fSp"),dl=e("nPby");class gl{constructor(l,n,e,t,u,s){this.chatService=l,this.authentication=n,this.alertService=e,this.route=t,this.socketService=u,this.router=s,this.isNewConv=!1,this.toogleChatClicked=!1,this.currentTotalMessage=0,this.canLoadMessage=!0,this.to=new dl.m,this.listRoom=[],this.isScroll=!1,this.message="",this.messages=[],this.listMessages=new Map,this.loadedMessage=new Map,this.imageHelper=new j.a,this.searchableRoom=["firstName","lastName"],this.name="Kim Amana",this.myName="test Name",this.user=this.authentication.currentUserValue,this.chatService.currentRoom.subscribe(l=>{this.roomId=l}),this.router.params.subscribe(l=>{this.reqId=l.id,this.reqId&&this.chatService.setCurrentRoom("room-"+this.user.id+"-"+this.reqId)})}ngOnInit(){this.chatService.newMessage().subscribe(l=>{if(console.log("new message in chatpage"),console.log(l),(l=(new dl.f).deserialize(l))&&l.from){var n=l;if(n.from!=this.user.id)if(n.roomId==this.roomId)this.messages.push(n);else{var e=this.listMessages.get(n.roomId)?this.listMessages.get(n.roomId):[];e.push(n),this.listMessages.set(n.roomId,e),this.loadedMessage.set(n.roomId,!1)}}},l=>{this.alertService.error("Failed")}),this.getListRoom(),this.chatService.inChatPage=!0,document.getElementsByTagName("body"),this.toogleChat.nativeElement.on("click",l=>{this.toogleChatClicked=!this.toogleChatClicked})}sendMessage(){if(this.message=this.message.substring(0,this.message.length-1),""!==this.message&&0!=this.message.length&&this.to.id){var l=new dl.f;l.text=this.message,l.type="text",l.user=this.user,l.createdAt=new Date,l.roomId=this.roomId,l.to=this.to,l.from=this.user,l.isNew=!0,this.messages.push(l),this.listMessages.set(this.roomId,this.messages),this.message=""}}startChat(l){this.to.id=l,this.chatService.startChat({to:this.to,text:"text send messge",roomId:this.roomId,user:this.user})}getListRoom(){this.chatService.listRoom$.subscribe(l=>{if(l){this.listRoom=[];var n=[];this.roomId?(this.isNewConv=!0,l.forEach(l=>{this.roomId==l.id&&(this.isNewConv=!1,"model"==this.user.role&&l.userId&&(this.to=(new dl.m).deserialize(l.userId)),"member"==this.user.role&&l.modelId&&(this.to=(new dl.m).deserialize(l.modelId))),"model"==this.user.role&&l.userId&&(this.listRoom.push(l),n.push(l.id),this.listMessages.set(l.id,new Array)),"member"==this.user.role&&l.modelId&&(this.listRoom.push(l),n.push(l.id),this.listMessages.set(l.id,new Array)),this.chatService.joinRoom((new dl.f).deserialize({roomId:l.id}))}),setTimeout(()=>{this.setTo()},300)):(this.isNewConv=!1,l.forEach(l=>{"model"==this.user.role&&l.userId&&(this.listRoom.push(l),n.push(l.id),this.listMessages.set(l.id,new Array)),"member"==this.user.role&&l.modelId&&(this.listRoom.push(l),n.push(l.id),this.listMessages.set(l.id,new Array)),this.chatService.joinRoom((new dl.f).deserialize({roomId:l.id}))}),this.setTo())}},l=>{this.alertService.error(l.msg)})}beginRoom(l,n){if(l){this.to=n,this.chatService.setCurrentRoom(l);var e=new dl.f;e.roomId=this.roomId,e.from=this.user.id,this.chatService.joinRoom(e),this.canLoadMessage=!0,this.loadedMessageInCurrentRoom()}else l="model"==this.user.role?"room-"+n+"-"+this.user.id:"room-"+this.user.id+"-"+n}setTo(){this.isNewConv?this.chatService.getUserInfo(this.reqId).subscribe(l=>{this.to=(new dl.m).deserialize(l.data),"model"==this.to.role&&"model"==this.user.role&&this.route.navigate(["/home"])},l=>{this.alertService.error(l.msg)}):this.listRoom.length&&(this.chatService.setCurrentRoom(this.listRoom[this.listRoom.length-1].id),this.to="model"==this.user.role?this.listRoom[this.listRoom.length-1].userId:this.to=this.listRoom[this.listRoom.length-1].modelId,this.beginRoom(this.roomId,this.to))}loadMoreMessage(){let l=this.listMessages.get(this.roomId).length;this.loadedMessageInCurrentRoom(l)}loadedMessageInCurrentRoom(l=0){this.chatService.loadMessageinRoom(this.roomId,this.listMessages.get(this.roomId).length,30).subscribe(l=>{var n=this.listMessages.get(this.roomId),e=[];l.data.forEach(l=>{e.push(l)}),e.reverse(),n=[...e,...n],l.total&&n.length>=l.total&&(this.canLoadMessage=!1),this.listMessages.set(this.roomId,n),this.messages=this.listMessages.get(this.roomId)?this.listMessages.get(this.roomId):[],this.loadedMessage.set(this.roomId,!0)})}attachMessage(){this.imgupload.nativeElement.click()}attachImg(l){if(this.to.id){let e=l.target.files[0];var n=new dl.f;n.type="image",n.user=this.user,n.createdAt=new Date,n.roomId=this.roomId,n.to=this.to,n.isNew=!0,n.file={data:e,inProgress:!1,progress:0},n.from=this.user,this.messages.push(n),this.listMessages.set(this.roomId,this.messages),this.message=""}}goModelDetail(){this.to&&"member"==this.user.role&&this.route.navigateByUrl("model-detail/"+this.to.id)}ngOnDestroy(){console.log("run ng on destroy"),this.chatService.inChatPage=!1}}var pl=e("VCjd"),fl=t.pb({encapsulation:0,styles:[[".list-chat[_ngcontent-%COMP%], .scroll-user[_ngcontent-%COMP%]{overflow-y:scroll}.load_more_message[_ngcontent-%COMP%]{background:#9bc3ec;color:#000;border-radius:10px;height:20px;width:80px;font-size:10px;text-align:center;margin:auto;padding:5px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;line-height:10px}"]],data:{}});function vl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Lb(1,null,["",""]))],null,(function(l,n){var e=n.component;l(n,1,0,e.listMessages.get(n.parent.parent.context.$implicit.id)[e.listMessages.get(n.parent.parent.context.$implicit.id).length-1].text)}))}function Bl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,8,"div",[["class","item-user"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,2,"div",[["class","pic-user"]],null,null,null,null,null)),(l()(),t.rb(2,0,null,null,1,"img",[["class","mat-list-avatar"],["matListAvatar",""]],[[8,"src",4]],null,null,null,null)),t.qb(3,16384,[[6,4]],0,L.b,[],null,null),(l()(),t.rb(4,0,null,null,2,"a",[["class","mat-line"],["matLine",""]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.beginRoom(l.parent.context.$implicit.id,l.parent.context.$implicit.userId)&&t),t}),null,null)),t.qb(5,16384,[[5,4]],0,w.o,[],null,null),(l()(),t.Lb(6,null,[""," ",""])),(l()(),t.hb(16777216,null,null,1,null,vl)),t.qb(8,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,8,0,e.listMessages.has(n.parent.context.$implicit.id)&&e.listMessages.get(n.parent.context.$implicit.id)[e.listMessages.get(n.parent.context.$implicit.id).length-1])}),(function(l,n){l(n,2,0,t.vb(1,"",n.component.imageHelper.getAvatarLinkV2(n.parent.context.$implicit.userId,n.parent.context.$implicit.userId.avatarPath,"thumbnail"),"")),l(n,6,0,n.parent.context.$implicit.userId.firstName,n.parent.context.$implicit.userId.lastName)}))}function Il(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Lb(1,null,["",""]))],null,(function(l,n){var e=n.component;l(n,1,0,e.listMessages.get(n.parent.parent.parent.context.$implicit.id)[e.listMessages.get(n.parent.parent.parent.context.$implicit.id).length-1].text)}))}function Cl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,8,"div",[["class","item-user"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,2,"div",[["class","pic-user"]],null,null,null,null,null)),(l()(),t.rb(2,0,null,null,1,"img",[["class","mat-list-avatar"],["matListAvatar",""]],[[8,"src",4]],null,null,null,null)),t.qb(3,16384,[[6,4]],0,L.b,[],null,null),(l()(),t.rb(4,0,null,null,2,"a",[["class","mat-line"],["matLine",""]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.beginRoom(l.parent.parent.context.$implicit.id,l.parent.parent.context.$implicit.modelId)&&t),t}),null,null)),t.qb(5,16384,[[5,4]],0,w.o,[],null,null),(l()(),t.Lb(6,null,[""," ",""])),(l()(),t.hb(16777216,null,null,1,null,Il)),t.qb(8,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,8,0,e.listMessages.has(n.parent.parent.context.$implicit.id)&&e.listMessages.get(n.parent.parent.context.$implicit.id)[e.listMessages.get(n.parent.parent.context.$implicit.id).length-1])}),(function(l,n){l(n,2,0,t.vb(1,"",n.component.imageHelper.getAvatarLinkV2(n.parent.parent.context.$implicit.modelId,n.parent.parent.context.$implicit.modelId.avatarPath,"thumbnail"),"")),l(n,6,0,n.parent.parent.context.$implicit.modelId.firstName,n.parent.parent.context.$implicit.modelId.lastName)}))}function Ml(l){return t.Nb(0,[(l()(),t.hb(16777216,null,null,1,null,Cl)),t.qb(1,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(0,null,null,0))],(function(l,n){l(n,1,0,n.parent.context.$implicit.modelId)}),null)}function kl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,7,"mat-list-item",[["class","mat-list-item"]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,y.d,y.b)),t.qb(1,1228800,null,3,L.c,[t.k,t.h,[2,L.g],[2,L.a]],null,null),t.Jb(603979776,5,{_lines:1}),t.Jb(603979776,6,{_avatar:0}),t.Jb(603979776,7,{_icon:0}),(l()(),t.hb(16777216,null,2,1,null,Bl)),t.qb(6,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.hb(0,[["memberlist",2]],2,0,null,Ml))],(function(l,n){l(n,6,0,"model"==n.component.user.role&&n.context.$implicit.userId,t.Db(n,7))}),(function(l,n){l(n,0,0,t.Db(n,1)._avatar||t.Db(n,1)._icon,t.Db(n,1)._avatar||t.Db(n,1)._icon)}))}function xl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,4,"mat-list",[["class","example-viewport list-user mat-list mat-list-base"],["itemSize","50"],["maxBufferPx","400"],["minBufferPx","200"]],null,null,null,y.e,y.a)),t.qb(1,704512,null,0,L.a,[t.k],null,null),(l()(),t.hb(16777216,null,0,2,null,kl)),t.qb(3,278528,null,0,q.l,[t.O,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),t.Hb(4,3)],(function(l,n){var e=n.component,u=t.Mb(n,3,0,l(n,4,0,t.Db(n.parent,0),e.listRoom,e.queryString,e.searchableRoom));l(n,3,0,u)}),null)}function Ll(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"div",[["class","pic-user"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.goModelDetail()&&t),t}),null,null)),(l()(),t.rb(1,0,null,null,0,"img",[["class","mat-list-avatar"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){var e=n.component;l(n,1,0,t.vb(1,"",e.imageHelper.getAvatarLinkV2(e.to,e.to.avatarPath,"thumbnail"),""))}))}function wl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,2,"div",[["class","status-top"]],null,null,null,null,null)),(l()(),t.Lb(-1,null,["Online "])),(l()(),t.rb(2,0,null,null,0,"span",[["class","status online"]],null,null,null,null,null))],null,null)}function ql(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,2,"div",[["class","status-top"]],null,null,null,null,null)),(l()(),t.Lb(-1,null,[" Offline"])),(l()(),t.rb(2,0,null,null,0,"span",[["class","status offline"]],null,null,null,null,null))],null,null)}function yl(l){return t.Nb(0,[(l()(),t.hb(16777216,null,null,1,null,ql)),t.qb(1,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(0,null,null,0))],(function(l,n){l(n,1,0,0==n.component.to.status)}),null)}function Dl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"a",[["class","load_more_message"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.loadMoreMessage()&&t),t}),null,null)),(l()(),t.Lb(-1,null,[" load more! "]))],null,null)}function Nl(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,7,"div",[],null,null,null,null,null)),t.Ib(512,null,q.G,q.H,[t.r,t.s,t.k,t.D]),t.qb(2,278528,null,0,q.k,[q.G],{ngClass:[0,"ngClass"]},null),t.Gb(3,{"chat-2 chat":0,"chat-1 chat":1}),t.qb(4,933888,null,0,D.a,[t.k,N.i,N.f,q.G,[6,q.k]],{ngClass:[0,"ngClass"]},null),t.Gb(5,{"chat-2 chat":0,"chat-1 chat":1}),(l()(),t.rb(6,0,null,null,1,"app-messages-chat",[],null,null,null,X,J)),t.qb(7,114688,null,0,F,[V.a,H],{message:[0,"message"],to:[1,"to"],user:[2,"user"]},null)],(function(l,n){var e=n.component,t=l(n,3,0,n.context.$implicit.from.id==e.user.id||n.context.$implicit.from==e.user.id,n.context.$implicit.from.id==e.to.id||n.context.$implicit.from==e.to.id);l(n,2,0,t);var u=l(n,5,0,n.context.$implicit.from.id==e.user.id||n.context.$implicit.from==e.user.id,n.context.$implicit.from.id==e.to.id||n.context.$implicit.from==e.to.id);l(n,4,0,u),l(n,7,0,n.context.$implicit,e.to,e.user)}),null)}function Rl(l){return t.Nb(0,[t.Fb(0,ll,[]),t.Jb(671088640,1,{listChat:0}),t.Jb(671088640,2,{imgupload:0}),t.Jb(402653184,3,{toogleChat:0}),t.Jb(402653184,4,{chatMain:0}),(l()(),t.rb(5,0,null,null,1,"app-navigation",[],null,null,null,nl.b,nl.a)),t.qb(6,4308992,null,0,el.a,[tl.a,ul.a,sl.a,il.a,q.i,al.m],null,null),(l()(),t.rb(7,0,null,null,56,"div",[["class","model-chat"]],null,null,null,null,null)),(l()(),t.rb(8,0,null,null,55,"div",[["class","container"]],null,null,null,null,null)),(l()(),t.rb(9,0,null,null,9,"div",[["class","hea-top-main"]],null,null,null,null,null)),(l()(),t.rb(10,0,null,null,8,"div",[["class","thumbnail"]],null,null,null,null,null)),(l()(),t.rb(11,0,null,null,1,"a",[["href","#"]],null,null,null,null,null)),(l()(),t.Lb(-1,null,["Home "])),(l()(),t.Lb(-1,null,[" > "])),(l()(),t.rb(14,0,null,null,1,"a",[["href","#"]],null,null,null,null,null)),(l()(),t.Lb(15,null,[""," "," "])),(l()(),t.Lb(-1,null,[" > "])),(l()(),t.rb(17,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t.Lb(-1,null,["Chat"])),(l()(),t.rb(19,0,[[4,0],["chatMain",1]],null,44,"div",[["class","chat-main"]],null,null,null,null,null)),t.Ib(512,null,q.G,q.H,[t.r,t.s,t.k,t.D]),t.qb(21,278528,null,0,q.k,[q.G],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.qb(22,933888,null,0,D.a,[t.k,N.i,N.f,q.G,[6,q.k]],{ngClass:[0,"ngClass"],klass:[1,"klass"]},null),(l()(),t.rb(23,0,[[3,0],["toogleChat",1]],null,1,"span",[["class","toogle-chat"]],null,[[null,"click"]],(function(l,n,e){var t=!0,u=l.component;return"click"===n&&(t=0!=(u.toogleChatClicked=!u.toogleChatClicked)&&t),t}),null,null)),(l()(),t.rb(24,0,null,null,0,"i",[["class","fa fa-users"]],null,null,null,null,null)),(l()(),t.rb(25,0,null,null,13,"div",[["class","left-main"]],null,null,null,null,null)),(l()(),t.rb(26,0,null,null,9,"div",[["class","search-chat"]],null,null,null,null,null)),(l()(),t.rb(27,0,null,null,1,"button",[],null,null,null,null,null)),(l()(),t.rb(28,0,null,null,0,"i",[["class","fa fa-search"]],null,null,null,null,null)),(l()(),t.rb(29,0,null,null,6,"input",[["name",""],["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,s=l.component;return"input"===n&&(u=!1!==t.Db(l,30)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.Db(l,30).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.Db(l,30)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.Db(l,30)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(s.queryString=e)&&u),u}),null,null)),t.qb(30,16384,null,0,ol.d,[t.D,t.k,[2,ol.a]],null,null),t.Ib(1024,null,ol.m,(function(l){return[l]}),[ol.d]),t.qb(32,671744,null,0,ol.r,[[8,null],[8,null],[8,null],[6,ol.m]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Ib(2048,null,ol.n,null,[ol.r]),t.qb(34,81920,null,0,rl.b,[ol.n,t.k],null,null),t.qb(35,16384,null,0,ol.o,[[4,ol.n]],null,null),(l()(),t.rb(36,0,null,null,2,"div",[["class","scroll-user"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,xl)),t.qb(38,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(39,0,null,null,24,"div",[["class","right-main"]],null,null,null,null,null)),(l()(),t.rb(40,0,null,null,8,"div",[["class","top-chat"]],null,null,null,null,null)),(l()(),t.rb(41,0,null,null,7,"div",[["class","item-user"]],null,null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Ll)),t.qb(43,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(44,0,null,null,1,"h3",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.goModelDetail()&&t),t}),null,null)),(l()(),t.Lb(45,null,[""," ",""])),(l()(),t.hb(16777216,null,null,1,null,wl)),t.qb(47,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.hb(0,[["chatOffline",2]],null,0,null,yl)),(l()(),t.rb(49,0,[[1,0],["listChat",1]],null,4,"div",[["class","list-chat"]],[[8,"scrollTop",0]],null,null,null,null)),(l()(),t.hb(16777216,null,null,1,null,Dl)),t.qb(51,16384,null,0,q.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.hb(16777216,null,null,1,null,Nl)),t.qb(53,278528,null,0,q.l,[t.O,t.L,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.rb(54,0,null,null,9,"div",[["class","form-message"]],null,null,null,null,null)),(l()(),t.rb(55,0,[[2,0],["imgupload",1]],null,0,"input",[["accept","image/x-png,image/gif,image/jpeg"],["id","imgupload"],["style","display:none"],["type","file"]],null,[[null,"change"]],(function(l,n,e){var t=!0;return"change"===n&&(t=!1!==l.component.attachImg(e)&&t),t}),null,null)),(l()(),t.rb(56,0,null,null,6,"textarea",[["placeholder","Enter Message"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,s=l.component;return"input"===n&&(u=!1!==t.Db(l,57)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t.Db(l,57).onTouched()&&u),"compositionstart"===n&&(u=!1!==t.Db(l,57)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t.Db(l,57)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(s.message=e)&&u),"keyup"===n&&(u=!1!==(13==e.keyCode&&s.sendMessage())&&u),u}),null,null)),t.qb(57,16384,null,0,ol.d,[t.D,t.k,[2,ol.a]],null,null),t.Ib(1024,null,ol.m,(function(l){return[l]}),[ol.d]),t.qb(59,671744,null,0,ol.r,[[8,null],[8,null],[8,null],[6,ol.m]],{model:[0,"model"]},{update:"ngModelChange"}),t.Ib(2048,null,ol.n,null,[ol.r]),t.qb(61,81920,null,0,rl.b,[ol.n,t.k],null,null),t.qb(62,16384,null,0,ol.o,[[4,ol.n]],null,null),(l()(),t.rb(63,0,null,null,0,"div",[["class","right-message"]],null,null,null,null,null)),(l()(),t.rb(64,0,null,null,1,"app-footer",[],null,null,null,cl.b,cl.a)),t.qb(65,114688,null,0,bl.a,[il.a,al.m,ml.a,hl.a,tl.a],null,null)],(function(l,n){var e=n.component;l(n,6,0),l(n,21,0,"chat-main",e.toogleChatClicked?"active":""),l(n,22,0,e.toogleChatClicked?"active":"","chat-main"),l(n,32,0,"",e.queryString),l(n,34,0),l(n,38,0,e.listMessages),l(n,43,0,e.to&&e.to.avatarUrl),l(n,47,0,1==e.to.status,t.Db(n,48)),l(n,51,0,e.canLoadMessage),l(n,53,0,e.messages),l(n,59,0,e.message),l(n,61,0),l(n,65,0)}),(function(l,n){var e=n.component;l(n,15,0,e.user.firstName,e.user.lastName),l(n,29,0,t.Db(n,35).ngClassUntouched,t.Db(n,35).ngClassTouched,t.Db(n,35).ngClassPristine,t.Db(n,35).ngClassDirty,t.Db(n,35).ngClassValid,t.Db(n,35).ngClassInvalid,t.Db(n,35).ngClassPending),l(n,45,0,e.to.firstName,e.to.lastName),l(n,49,0,t.Db(n,49).scrollHeight),l(n,56,0,t.Db(n,62).ngClassUntouched,t.Db(n,62).ngClassTouched,t.Db(n,62).ngClassPristine,t.Db(n,62).ngClassDirty,t.Db(n,62).ngClassValid,t.Db(n,62).ngClassInvalid,t.Db(n,62).ngClassPending)}))}function Ol(l){return t.Nb(0,[(l()(),t.rb(0,0,null,null,1,"app-chat",[],null,null,null,Rl,fl)),t.qb(1,245760,null,0,gl,[V.a,tl.a,hl.a,al.m,pl.a,al.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Sl=t.nb("app-chat",gl,Ol,{name:"name"},{},[]),Pl=e("POq0"),$l=e("5GAg"),Al=e("DkaU"),_l=e("Mc5n"),El=e("hOhj"),jl=e("QQfA"),Fl=e("IP0z"),Vl=e("/Co4"),Ul=e("qJ5m"),Hl=e("s6ns"),Jl=e("821u"),zl=e("gavF"),Tl=e("JjoW"),Gl=e("Mz6y"),Zl=e("cUpR"),Kl=e("OIZN"),Ql=e("7kcP"),Wl=e("G0yt"),Yl=e("2uy1"),Xl=e("z/SZ"),ln=e("FE24"),nn=e("978R"),en=e("E+vl"),tn=e("qJ50"),un=e("zQui"),sn=e("zMNK"),an=e("Fwaw"),on=e("mkRZ"),rn=e("igqZ"),cn=e("r0V8"),bn=e("kNGD"),mn=e("Gi4r"),hn=e("5Bek"),dn=e("c9fC"),gn=e("FVPZ"),pn=e("oapL"),fn=e("HsOI"),vn=e("ZwOa"),Bn=e("8P0U"),In=e("elxJ"),Cn=e("BV1i"),Mn=e("lT8R"),kn=e("pBi1"),xn=e("dFDH"),Ln=e("8rEH"),wn=e("rWV4"),qn=e("BzsH"),yn=e("02hT"),Dn=e("PCNd"),Nn=e("V2/6"),Rn=e("VDRc"),On=e("Nhcz"),Sn=e("u9T3"),Pn=e("JUyF"),$n=e("YD+O"),An=e("VUZM");class _n{}var En=e("dvZr");e.d(n,"ChatModuleNgFactory",(function(){return jn}));var jn=t.ob(u,[],(function(l){return t.Ab([t.Bb(512,t.j,t.ab,[[8,[s.a,i.b,i.a,a.a,o.a,o.b,r.a,c.a,c.b,c.l,c.m,c.i,c.j,c.k,b.a,m.a,h.a,d.a,g.a,p.a,f.a,v.a,B.a,I.a,C.a,M.a,k.a,x.a,Sl]],[3,t.j],t.w]),t.Bb(4608,q.o,q.n,[t.t,[2,q.L]]),t.Bb(4608,Pl.c,Pl.c,[]),t.Bb(135680,$l.h,$l.h,[t.y,S.a]),t.Bb(4608,Al.b,Al.b,[t.L]),t.Bb(4608,_l.a,_l.a,[q.d,t.y,El.e,_l.c]),t.Bb(4608,jl.c,jl.c,[jl.i,jl.e,t.j,jl.h,jl.f,t.q,t.y,q.d,Fl.b,[2,q.i]]),t.Bb(5120,jl.j,jl.k,[jl.c]),t.Bb(5120,Vl.a,Vl.b,[jl.c]),t.Bb(4608,w.d,w.d,[]),t.Bb(5120,Ul.g,Ul.a,[[3,Ul.g]]),t.Bb(5120,Hl.c,Hl.d,[jl.c]),t.Bb(135680,Hl.e,Hl.e,[jl.c,t.q,[2,q.i],[2,Hl.b],Hl.c,[3,Hl.e],jl.e]),t.Bb(4608,Jl.h,Jl.h,[]),t.Bb(5120,Jl.a,Jl.b,[jl.c]),t.Bb(5120,zl.c,zl.j,[jl.c]),t.Bb(4608,w.c,w.z,[[2,w.h],S.a]),t.Bb(5120,Tl.a,Tl.b,[jl.c]),t.Bb(5120,Gl.b,Gl.c,[jl.c]),t.Bb(4608,Zl.e,w.e,[[2,w.i],[2,w.n]]),t.Bb(5120,Kl.c,Kl.a,[[3,Kl.c]]),t.Bb(5120,Ql.d,Ql.a,[[3,Ql.d]]),t.Bb(5120,t.b,(function(l,n){return[N.j(l,n)]}),[q.d,t.A]),t.Bb(4608,ol.y,ol.y,[]),t.Bb(4608,Wl.C,Wl.C,[t.j,t.q,Wl.sb,Wl.D]),t.Bb(4608,ol.e,ol.e,[]),t.Bb(4608,Yl.a,Yl.a,[t.y,t.E,t.A]),t.Bb(4608,Xl.a,Xl.a,[t.j,t.y,t.q,Yl.a,t.g]),t.Bb(4608,ln.f,ln.f,[]),t.Bb(4608,nn.a,nn.a,[]),t.Bb(4608,en.e,en.e,[t.y]),t.Bb(4608,en.d,en.d,[en.e,t.y]),t.Bb(1073742336,q.c,q.c,[]),t.Bb(1073742336,S.b,S.b,[]),t.Bb(1073742336,Pl.d,Pl.d,[]),t.Bb(1073742336,$l.a,$l.a,[]),t.Bb(1073742336,Fl.a,Fl.a,[]),t.Bb(1073742336,tn.e,tn.e,[]),t.Bb(1073742336,un.p,un.p,[]),t.Bb(1073742336,Al.a,Al.a,[]),t.Bb(1073742336,_l.b,_l.b,[]),t.Bb(1073742336,w.n,w.n,[[2,w.f],[2,Zl.f]]),t.Bb(1073742336,w.y,w.y,[]),t.Bb(1073742336,w.w,w.w,[]),t.Bb(1073742336,w.t,w.t,[]),t.Bb(1073742336,sn.g,sn.g,[]),t.Bb(1073742336,El.c,El.c,[]),t.Bb(1073742336,jl.g,jl.g,[]),t.Bb(1073742336,Vl.c,Vl.c,[]),t.Bb(1073742336,an.c,an.c,[]),t.Bb(1073742336,on.a,on.a,[]),t.Bb(1073742336,rn.d,rn.d,[]),t.Bb(1073742336,cn.d,cn.d,[]),t.Bb(1073742336,cn.c,cn.c,[]),t.Bb(1073742336,bn.b,bn.b,[]),t.Bb(1073742336,mn.c,mn.c,[]),t.Bb(1073742336,Ul.h,Ul.h,[]),t.Bb(1073742336,Hl.k,Hl.k,[]),t.Bb(1073742336,Jl.i,Jl.i,[]),t.Bb(1073742336,hn.c,hn.c,[]),t.Bb(1073742336,dn.a,dn.a,[]),t.Bb(1073742336,w.p,w.p,[]),t.Bb(1073742336,gn.a,gn.a,[]),t.Bb(1073742336,pn.c,pn.c,[]),t.Bb(1073742336,fn.e,fn.e,[]),t.Bb(1073742336,vn.b,vn.b,[]),t.Bb(1073742336,zl.i,zl.i,[]),t.Bb(1073742336,zl.f,zl.f,[]),t.Bb(1073742336,w.A,w.A,[]),t.Bb(1073742336,w.q,w.q,[]),t.Bb(1073742336,Tl.d,Tl.d,[]),t.Bb(1073742336,Gl.e,Gl.e,[]),t.Bb(1073742336,Kl.d,Kl.d,[]),t.Bb(1073742336,Bn.a,Bn.a,[]),t.Bb(1073742336,O.c,O.c,[]),t.Bb(1073742336,In.a,In.a,[]),t.Bb(1073742336,Cn.h,Cn.h,[]),t.Bb(1073742336,Mn.a,Mn.a,[]),t.Bb(1073742336,kn.d,kn.d,[]),t.Bb(1073742336,kn.c,kn.c,[]),t.Bb(1073742336,xn.e,xn.e,[]),t.Bb(1073742336,Ql.e,Ql.e,[]),t.Bb(1073742336,Ln.m,Ln.m,[]),t.Bb(1073742336,wn.j,wn.j,[]),t.Bb(1073742336,qn.b,qn.b,[]),t.Bb(1073742336,yn.b,yn.b,[]),t.Bb(1073742336,L.d,L.d,[]),t.Bb(1073742336,Dn.a,Dn.a,[]),t.Bb(1073742336,Nn.a,Nn.a,[]),t.Bb(1073742336,N.c,N.c,[]),t.Bb(1073742336,Rn.e,Rn.e,[]),t.Bb(1073742336,D.c,D.c,[]),t.Bb(1073742336,On.a,On.a,[]),t.Bb(1073742336,Sn.a,Sn.a,[[2,N.g],t.A]),t.Bb(1073742336,al.q,al.q,[[2,al.v],[2,al.m]]),t.Bb(1073742336,Pn.b,Pn.b,[]),t.Bb(1073742336,Wl.d,Wl.d,[]),t.Bb(1073742336,Wl.g,Wl.g,[]),t.Bb(1073742336,Wl.h,Wl.h,[]),t.Bb(1073742336,Wl.l,Wl.l,[]),t.Bb(1073742336,Wl.m,Wl.m,[]),t.Bb(1073742336,ol.x,ol.x,[]),t.Bb(1073742336,ol.k,ol.k,[]),t.Bb(1073742336,Wl.s,Wl.s,[]),t.Bb(1073742336,Wl.z,Wl.z,[]),t.Bb(1073742336,Wl.E,Wl.E,[]),t.Bb(1073742336,Wl.G,Wl.G,[]),t.Bb(1073742336,Wl.L,Wl.L,[]),t.Bb(1073742336,Wl.O,Wl.O,[]),t.Bb(1073742336,Wl.R,Wl.R,[]),t.Bb(1073742336,Wl.U,Wl.U,[]),t.Bb(1073742336,Wl.Y,Wl.Y,[]),t.Bb(1073742336,Wl.db,Wl.db,[]),t.Bb(1073742336,Wl.gb,Wl.gb,[]),t.Bb(1073742336,Wl.hb,Wl.hb,[]),t.Bb(1073742336,Wl.ib,Wl.ib,[]),t.Bb(1073742336,Wl.F,Wl.F,[]),t.Bb(1073742336,ol.u,ol.u,[]),t.Bb(1073742336,$n.b,$n.b,[]),t.Bb(1073742336,ln.e,ln.e,[]),t.Bb(1073742336,nn.d,nn.d,[]),t.Bb(1073742336,rl.d,rl.d,[]),t.Bb(1073742336,en.b,en.b,[]),t.Bb(1073742336,An.a,An.a,[]),t.Bb(1073742336,Dn.b,Dn.b,[]),t.Bb(1073742336,_n,_n,[]),t.Bb(1073742336,u,u,[]),t.Bb(256,bn.a,{separatorKeyCodes:[En.f]},[]),t.Bb(256,w.g,w.k,[]),t.Bb(256,ln.a,{autoClose:!0,insideClick:!1},[]),t.Bb(1024,al.k,(function(){return[[{path:"",component:gl}]]}),[])])}))}}]);